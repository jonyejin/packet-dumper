---
{"dg-publish":true,"permalink":"/root/csci-551-651/p11-caesar05a-bgp-routing-policies-in-isp-networks-review/","tags":["PaperReview"]}
---

# What I learned
1. people do with BGP - Traffic Engineering: load balancing, steering traffic. > still, fat finger and scaling problem
2. IGP, EGP is the right term to describe routing protocols. Internal Gateway Protocol, Exterior Gateway Protocol.
3. Definition of Autonomous System: a set of routers following the same routing policy. â€œpeer-to-peerâ€ relationship usually means ASes exchange traffic but not pay money.  Tier-1 AS: an AS that has no providers, so all Tier-1s must talk to each other directly. Private Network Interconnect (**PNI**): when two ASes agree to connect directly. 
4. **iBGP is not IGP!!!** (pretty shocking ðŸ˜³)**IGP**Â is used to find the best paths for internal traffic, whileÂ **iBGP**Â is used to propagate external route information within an AS.

**BGP Messages**
â€¢ just a few simple messages
â€“ OPEN: set up connection and parameters
â€“ **UPDATE**: change a route w/attributes
â€¢ also called â€œinjectâ€ or â€œwithdrawâ€ a route
â€“ NOTIFICATION: error reporting
â€“ **KEEPALIVE**: no change, but link is up
â€¢ everything interesting is attributes to update

**BGP Routing table Attribute Example**
12/8(Network Address), 1, 2(AS Path), my interface address (next hop)

BGP Attributes
- local-pref : ë§í¬ì— ì„¤ì •ë˜ëŠ”ê±°ìž„. no advertisement. higher = more preferred
- AS-Path (appended)
- MED : Originì´ ì•Œë¦¬ëŠ” ê²ƒ. "ì´ìª½ìœ¼ë¡œ ë³´ë‚´ì¤˜! ì´ìª½ì„ ì„ í˜¸í•˜ë‹ˆê¹Œ!". lower = more preferred
- Community String

donâ€™t forward routes from our providers (weâ€™re not a transit): no-valley routing

Q) origin type?


# Stats to Remember
Some IPv4 BGP Stats (as of 2024-09-19) (data from Japan (bgp-stats@lists.apnic.net))
- BGP routing table entries: 959,872 (prefixes after max aggr. : 365,854)
- address announced = 3,034,538,240 (which is 80% of allocated address)
	- We are out of addresses to allocate.

* ASes in Internet rtg(routing) table: 76,186
	* = origin-only ASes: 65,228 + transit ASes: 10,958
		* origin-only ASes w/only one prefix: 26,830
* AS path length: mean 5.3, maximum seen: 84

IPv6 BGP Stats
- Â BGP routing table entries: 202,334 (max aggr not possible??)
- addresses announced: (not reported)
- ASes in Internet rtg table: 33,406
	- origin-only ASes: 33,081



---

Path: ë‚´ ì£¼ë³€ì— ìžˆëŠ” ì• ë“¤í•œí…Œ 

ONLY TRANSIT PROVIDER ANNOUNCE CUSTOMERS !!!
(Ex: USC does not announce )
-> Does this mean origin-only AS?

-> Question: What happens if ISPs exploit our network by using it as a path?
Answer; (general policy) â€˜no-valleyâ€™ rule: ISPs donâ€™t send transit traffic through the customers, because it is transit-providerâ€™s jobs.
NTT? Lumen? C-NIC?

Q) loop? AS-PATH Prepending?
Answer; It is their choice! Maybe open a ticket.



> [!fold]+ ì ‘ê¸°
> "BGP Routing Policies in ISP Networks" ë…¼ë¬¸ì€ ì¸í„°ë„· ì„œë¹„ìŠ¤ ì œê³µìž(ISP) ë„¤íŠ¸ì›Œí¬ì—ì„œ ì‚¬ìš©í•˜ëŠ” BGP(Border Gateway Protocol) ë¼ìš°íŒ… ì •ì±…ì— ëŒ€í•œ ë‚´ìš©ì„ ë‹¤ë£¹ë‹ˆë‹¤. BGPëŠ” ì¸í„°ë„· ìƒì—ì„œ ìžìœ¨ ì‹œìŠ¤í…œ(AS, Autonomous Systems) ê°„ì— ë¼ìš°íŒ… ì •ë³´ë¥¼ êµí™˜í•˜ëŠ” í”„ë¡œí† ì½œë¡œ, ê° ISPëŠ” ìžì‹ ë§Œì˜ ì •ì±…ì„ ë°”íƒ•ìœ¼ë¡œ ë¼ìš°íŒ… ê²°ì •ì„ ë‚´ë¦½ë‹ˆë‹¤. ì´ ë…¼ë¬¸ì€ ì´ëŸ¬í•œ ì •ì±…ë“¤ì´ BGP ê²½ë¡œ ì„ íƒê³¼ ì¸í„°ë„· êµ¬ì¡°ì— ì–´ë–¤ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ”ì§€ ì„¤ëª…í•©ë‹ˆë‹¤.
> ë‹¤ìŒì€ ë…¼ë¬¸ì˜ ì£¼ìš” ë‚´ìš©ì„ ìš”ì•½í•œ ê²ƒìž…ë‹ˆë‹¤:
	
### 1. **BGP ë¼ìš°íŒ… ê°œìš”**
   - BGPëŠ” ì¸í„°ë„·ì˜ ìžìœ¨ ì‹œìŠ¤í…œë“¤(AS) ê°„ì— ë¼ìš°íŒ… ì •ë³´ë¥¼ ì „ë‹¬í•˜ëŠ” í”„ë¡œí† ì½œìž…ë‹ˆë‹¤. ASëŠ” ê°ê¸° ë‹¤ë¥¸ ISPë“¤ì´ ìš´ì˜í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ë¡œ, ê° ASëŠ” ë…ë¦½ì ìœ¼ë¡œ ìžì‹ ì˜ ë¼ìš°íŒ… ì •ì±…ì„ ì„¤ì •í•˜ê³  ìš´ì˜í•©ë‹ˆë‹¤.
   - ISPë“¤ì€ ê²½ì œì  ì´ìœ ì™€ ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ì„ ìµœì í™”í•˜ê¸° ìœ„í•´ íŠ¹ì • ê²½ë¡œë¥¼ ì„ í˜¸í•˜ê±°ë‚˜ ë°°ì œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë¼ìš°íŒ… ì •ì±…ì„ ì„¤ê³„í•©ë‹ˆë‹¤.

### 2. **BGP ê²½ë¡œ ì„ íƒ ê³¼ì •**
   - BGPëŠ” ë‹¤ì–‘í•œ ê²½ë¡œ ì¤‘ì—ì„œ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ëŠ” ë³µìž¡í•œ í”„ë¡œì„¸ìŠ¤ë¥¼ ë”°ë¦…ë‹ˆë‹¤. ê²½ë¡œ ì„ íƒ ê³¼ì •ì€ ê¸°ë³¸ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ê¸°ì¤€ì„ ë”°ë¦…ë‹ˆë‹¤:
	 1. **Local Preference**: ISP ë‚´ë¶€ì—ì„œ ì„¤ì •í•œ ìš°ì„ ìˆœìœ„ ê°’ì— ë”°ë¼ ê²½ë¡œë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
	 2. **AS Path Length**: ê²½ë¡œì— í¬í•¨ëœ ASì˜ ìˆ˜ê°€ ì ì„ìˆ˜ë¡ ì„ í˜¸ë©ë‹ˆë‹¤.
	 3. **Origin Type**: ê²½ë¡œê°€ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ë°œìƒí–ˆëŠ”ì§€ì— ë”°ë¼ ìš°ì„ ìˆœìœ„ê°€ ë‹¤ë¦…ë‹ˆë‹¤.
	 4. **Multi-Exit Discriminator (MED)**: ë™ì¼í•œ ê²½ë¡œë¥¼ ê°€ì§„ ì—¬ëŸ¬ ì¶œêµ¬ ì§€ì  ì¤‘ íŠ¹ì • ì¶œêµ¬ë¥¼ ì„ í˜¸í•˜ëŠ” ê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤.
	 5. **EBGP > IBGP**: ì™¸ë¶€ BGP ê²½ë¡œ(EBGP)ê°€ ë‚´ë¶€ BGP ê²½ë¡œ(IBGP)ë³´ë‹¤ ìš°ì„ ì‹œë©ë‹ˆë‹¤.

### 3. **ISPì˜ BGP ë¼ìš°íŒ… ì •ì±…**
   - ê° ISPëŠ” ìžì‹ ë§Œì˜ ë¼ìš°íŒ… ì •ì±…ì„ ì‚¬ìš©í•˜ì—¬ ê²½ë¡œë¥¼ ì„ íƒí•©ë‹ˆë‹¤. ì´ëŠ” ì¢…ì¢… ê²½ì œì  ì´ìµ, íŠ¸ëž˜í”½ ê´€ë¦¬, ê³„ì•½ ì¡°ê±´ ë“±ì— ë”°ë¼ ê²°ì •ë©ë‹ˆë‹¤.
   - ì¼ë°˜ì ìœ¼ë¡œ ISPëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì •ì±…ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:
	 - **í”¼ì–´ë§(í”¼ì–´ë§ ê³„ì•½)**: ë™ì¼í•œ ê³„ì¸µì— ìžˆëŠ” ë‹¤ë¥¸ ISPë“¤ê³¼ íŠ¸ëž˜í”½ì„ ë¬´ë£Œë¡œ êµí™˜í•˜ëŠ” ë°©ì‹. í”¼ì–´ë§ íŒŒíŠ¸ë„ˆì—ê²Œ íŠ¸ëž˜í”½ì„ ë³´ë‚´ëŠ” ê²ƒì„ ì„ í˜¸.
	 - **ê³ ê°ê³¼ì˜ ê´€ê³„**: ê³ ê°ì—ê²Œ íŠ¸ëž˜í”½ì„ ë³´ë‚´ëŠ” ê²ƒì„ ì„ í˜¸í•˜ë©°, ê³ ê°ìœ¼ë¡œë¶€í„° ë°›ì€ íŠ¸ëž˜í”½ì„ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ë¡œ ì „ì†¡.
	 - **íŠ¸ëžœì‹¯ ì œê³µ**: ìƒìœ„ ISPë¡œë¶€í„° ë„¤íŠ¸ì›Œí¬ë¥¼ ë¹Œë ¤ íŠ¸ëž˜í”½ì„ ì „ë‹¬í•˜ëŠ” ë°©ì‹. íŠ¸ëžœì‹¯ ê²½ë¡œëŠ” ë¹„ìš©ì´ ë°œìƒí•  ìˆ˜ ìžˆì–´ ìš°ì„ ìˆœìœ„ê°€ ë‚®ìŒ.

### 4. **BGP ì •ì±…ì˜ ì˜í–¥**
   - ë¼ìš°íŒ… ì •ì±…ì€ ì¸í„°ë„·ì˜ ì„±ëŠ¥, ì•ˆì •ì„±, ê·¸ë¦¬ê³  ê²½ì œì  íš¨ìœ¨ì„±ì— í° ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤. ìž˜ëª»ëœ ì •ì±… ì„¤ì •ì€ ë„¤íŠ¸ì›Œí¬ ë³‘ëª© í˜„ìƒì´ë‚˜ ê²½ë¡œ ë£¨í”„, ë¶ˆí•„ìš”í•œ ê²½ë¡œ íƒìƒ‰ ë“±ì„ ìœ ë°œí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
   - ISP ê°„ì˜ í˜‘ì •, ì •ì±… ë³€ê²½ ë“±ì´ ì¸í„°ë„· ì „ë°˜ì˜ ë¼ìš°íŒ…ì— ì˜ˆê¸°ì¹˜ ëª»í•œ ë³€í™”ë¥¼ ì´ˆëž˜í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. 

### 5. **ì—°êµ¬ ë°©ë²•ë¡ **
   - ì´ ë…¼ë¬¸ì€ ì‹¤ì œ ISP ë„¤íŠ¸ì›Œí¬ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ BGP ë¼ìš°íŒ… ì •ì±…ì´ ì¸í„°ë„· ê²½ë¡œì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ë¶„ì„í•©ë‹ˆë‹¤.
   - ì£¼ìš” ISPì˜ BGP í…Œì´ë¸”ê³¼ ê´€ë ¨ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³ , ì´ë¥¼ í†µí•´ ê° ISPì˜ ì •ì±… ê²°ì •ì´ ì–´ë–»ê²Œ ì¸í„°ë„· íŠ¸ëž˜í”½ ê²½ë¡œë¥¼ í˜•ì„±í•˜ëŠ”ì§€ì— ëŒ€í•œ í†µì°°ì„ ì œê³µí•©ë‹ˆë‹¤.

### 6. **ê²°ë¡ **
   - BGP ë¼ìš°íŒ… ì •ì±…ì€ ì¸í„°ë„·ì˜ ì „ì²´ì ì¸ êµ¬ì¡°ì™€ ì„±ëŠ¥ì— ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤. ISPë“¤ì€ ìžì‹ ë“¤ì˜ ê²½ì œì  ì´ìµê³¼ ë„¤íŠ¸ì›Œí¬ ì•ˆì •ì„±ì„ ê·¹ëŒ€í™”í•˜ê¸° ìœ„í•´ ë³µìž¡í•œ ì •ì±…ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
   - ì´ ë…¼ë¬¸ì€ ì¸í„°ë„·ì˜ ë¼ìš°íŒ… ì •ì±…ì„ ë” ìž˜ ì´í•´í•˜ê³  ìµœì í™”í•˜ëŠ” ë° ê¸°ì—¬í•  ìˆ˜ ìžˆëŠ” ì¤‘ìš”í•œ ì •ë³´ë¥¼ ì œê³µí•˜ë©°, ì´ë¥¼ í†µí•´ ë„¤íŠ¸ì›Œí¬ ì—”ì§€ë‹ˆì–´ë“¤ì´ ë” ë‚˜ì€ ë¼ìš°íŒ… ê²°ì •ì„ ë‚´ë¦´ ìˆ˜ ìžˆê²Œ í•©ë‹ˆë‹¤.

ì´ ë…¼ë¬¸ì€ ISPë“¤ì´ BGP ë¼ìš°íŒ… ì •ì±…ì„ í†µí•´ ì¸í„°ë„· íŠ¸ëž˜í”½ì„ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ê³¼ ê·¸ ê²°ê³¼ì— ëŒ€í•´ ì‹¬ì¸µì ìœ¼ë¡œ ë¶„ì„í•œ ë‚´ìš©ì„ ë‹´ê³  ìžˆìŠµë‹ˆë‹¤.


# Origin Type?

**Origin type**ì€ **BGP (Border Gateway Protocol)**ì—ì„œ íŠ¹ì • ê²½ë¡œì— ëŒ€í•´ ê·¸ ê²½ë¡œê°€ ì–´ë””ì—ì„œ ë¹„ë¡¯ë˜ì—ˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì†ì„±ìž…ë‹ˆë‹¤. ì´ëŠ” BGPì˜ `ORIGIN` ì†ì„±ìœ¼ë¡œ í‘œí˜„ë˜ë©°, **IP ê²½ë¡œê°€ ì–´ë–»ê²Œ ì‹œìž‘ë˜ì—ˆëŠ”ì§€**ì— ëŒ€í•œ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. `ORIGIN`ì€ BGP ê²½ë¡œ ì„ íƒ ê³¼ì •ì—ì„œ ê²½ë¡œ ìš°ì„ ìˆœìœ„ë¥¼ ê²°ì •í•˜ëŠ” ë° ì¤‘ìš”í•œ ìš”ì†Œ ì¤‘ í•˜ë‚˜ë¡œ ìž‘ìš©í•©ë‹ˆë‹¤.

BGPì—ì„œ **origin type**ì€ ì„¸ ê°€ì§€ ì£¼ìš” ê°’ìœ¼ë¡œ í‘œí˜„ë©ë‹ˆë‹¤:

1. **IGP (Interior Gateway Protocol)**:
   - **0**ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.
   - í•´ë‹¹ ê²½ë¡œê°€ **AS ë‚´ë¶€**ì—ì„œ ì‹œìž‘ë˜ì—ˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì¦‰, ê²½ë¡œê°€ AS ë‚´ì—ì„œ ì„¤ì •ëœ ê²½ë¡œì´ê³ , BGP ì™¸ì˜ í”„ë¡œí† ì½œ(ì˜ˆ: OSPF, RIP)ì„ í†µí•´ ìƒì„±ë˜ì—ˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
   - ì¼ë°˜ì ìœ¼ë¡œ **ê°€ìž¥ ì„ í˜¸**ë˜ëŠ” ê²½ë¡œë¡œ ê°„ì£¼ë©ë‹ˆë‹¤.

2. **EGP (Exterior Gateway Protocol)**:
   - **1**ë¡œ í‘œì‹œë©ë‹ˆë‹¤.
   - ê²½ë¡œê°€ **EGP(ê³¼ê±° BGPì˜ ì „ì‹ )**ë¥¼ í†µí•´ í•™ìŠµë˜ì—ˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. EGPëŠ” BGPê°€ ê°œë°œë˜ê¸° ì „ì— ì‚¬ìš©ë˜ë˜ í”„ë¡œí† ì½œë¡œ, í˜„ìž¬ëŠ” ê±°ì˜ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
   - BGPì—ì„œëŠ” ì¼ë°˜ì ìœ¼ë¡œ **ì¤‘ê°„ ì •ë„ì˜ ìš°ì„ ìˆœìœ„**ë¥¼ ê°€ì§‘ë‹ˆë‹¤.

3. **INCOMPLETE**:
   - **2**ë¡œ í‘œì‹œë©ë‹ˆë‹¤.
   - ê²½ë¡œê°€ **ìž¬ë°°í¬ëœ ê²½ë¡œ**ë¡œ, BGP ì´ì™¸ì˜ ë‹¤ë¥¸ ê²½ë¡œ í•™ìŠµ ë°©ì‹(ì˜ˆ: ì •ì  ê²½ë¡œ, ë‹¤ë¥¸ í”„ë¡œí† ì½œì—ì„œ ìž¬ë°°í¬ëœ ê²½ë¡œ)ì„ í†µí•´ í•™ìŠµëœ ê²ƒìž…ë‹ˆë‹¤.
   - **ê°€ìž¥ ë‚®ì€ ìš°ì„ ìˆœìœ„**ë¥¼ ê°€ì§€ë©°, ê²½ë¡œì— ëŒ€í•œ ì •ë³´ê°€ ë¶ˆì™„ì „í•˜ë‹¤ê³  í•´ì„ë  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

### ì •ë¦¬:
- **Origin Type**ì€ BGP ê²½ë¡œì— ëŒ€í•œ ì†ì„±ìœ¼ë¡œ, ê²½ë¡œê°€ ì‹œìž‘ëœ ë°©ì‹(ë‚´ë¶€/ì™¸ë¶€/ë¶ˆì™„ì „í•œ ì •ë³´)ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
- ìš°ì„ ìˆœìœ„ëŠ” ë³´í†µ IGP > EGP > INCOMPLETE ìˆœìœ¼ë¡œ ê²°ì •ë©ë‹ˆë‹¤.





> [!tip] Background Information

> [!abstract] Idea

> [!note] Contribution

> [!info] Related Documents

> [!question] Remaining Questions



11.0/9
11.128/9

